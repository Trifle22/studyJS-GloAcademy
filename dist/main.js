(()=>{"use strict";(function e(t){const o=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds");!function(){const e=function(){const e=(new Date(t).getTime()-(new Date).getTime())/1e3,o=Math.floor(e%60),n=Math.floor(e/60%60);return{timeRemaining:e,hoursRemaining:Math.floor(e/60/60),minutesRemaining:n,secondsRemaining:o}}();e.hoursRemaining<10&&(e.hoursRemaining="0"+e.hoursRemaining.toString()),e.minutesRemaining<10&&(e.minutesRemaining="0"+e.minutesRemaining.toString()),e.secondsRemaining<10&&(e.secondsRemaining="0"+e.secondsRemaining.toString()),o.textContent=e.hoursRemaining,n.textContent=e.minutesRemaining,r.textContent=e.secondsRemaining}();const c=setInterval(e,1e3,t);new Date(t).getTime()-(new Date).getTime()<=0&&(o.textContent="00",n.textContent="00",r.textContent="00",o.style.color="red",n.style.color="red",r.style.color="red",clearInterval(c))})("12 march 2021"),document.querySelectorAll('a[href*="#"]').forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href").substr(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{const o=t.target;(o.closest(".menu")||o.closest(".close-btn")||o.closest("ul>li>a")||!o.closest(".active-menu")&&e.classList.contains("active-menu"))&&e.classList.toggle("active-menu")}))})(),(()=>{const e=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((t=>{t.addEventListener("click",(()=>{if(screen.width>=768){const t=Date.now(),o=setInterval((()=>{const n=Date.now()-t;n>=1e3?clearInterval(o):function(t){e.style.display="block",e.style.opacity=t/1e3}(n)}),10)}else e.style.display="block"}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,r)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),o=document.querySelector(".portfolio-dots"),n=document.querySelector(".portfolio-content");let r,c=0;const l=document.createElement("li.dot");for(let t=0;t<e.length;t++)o.append(l);const a=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},i=()=>{a(e,c,"portfolio-item-active"),a(t,c,"dot-active"),c++,c>=e.length&&(c=0),s(e,c,"portfolio-item-active"),s(t,c,"dot-active")},u=(e=1500)=>{r=setInterval(i,e)};n.addEventListener("click",(o=>{o.preventDefault();const n=o.target;n.matches(".portfolio-btn, .dot")&&(a(e,c,"portfolio-item-active"),a(t,c,"dot-active"),n.matches("#arrow-right")?c++:n.matches("#arrow-left")?c--:n.matches(".dot")&&t.forEach(((e,t)=>{e===n&&(c=t)})),c>=e.length?c=0:c<0&&(c=e.length-1),s(e,c,"portfolio-item-active"),s(t,c,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(r)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(1500)})(),function(){const e=document.querySelector(".command");let t;e.addEventListener("mouseover",(e=>{const o=e.target;o.matches("img")&&(t=o.src,o.src=o.dataset.img,o.dataset.img=t)})),e.addEventListener("mouseout",(e=>{const o=e.target;o.matches("img")&&(t=o.src,o.src=o.dataset.img,o.dataset.img=t)}))}(),function(){const e=document.querySelectorAll(".calc-item");for(let t=1;t<e.length;t++)e[t].addEventListener("input",(()=>{e[t].value=e[t].value.replace(/\D/g,"")}))}(),function(){const e=document.querySelectorAll('input[placeholder="Ваше имя"]'),t=document.querySelector('input[placeholder="Ваше сообщение"]'),o=document.querySelectorAll('input[type="email"]'),n=document.querySelectorAll('input[placeholder="Номер телефона"]'),r=e=>(e=(e=(e=e.replace(/\s+/g," ")).replace(/-+/g,"-")).replace(/^[ |\-+]/g,"")).replace(/[ |\-+]$/g,"");e.forEach((e=>{e.addEventListener("blur",(t=>{let o=t.target.value;o=o.replace(/[^а-яА-ЯёЁ\s\-]/g,""),o=r(o);const n=o.split(" ");for(let e=0;e<n.length;e++)n[e]&&(n[e]=n[e][0].toUpperCase()+n[e].substr(1).toLowerCase());o=n.join(" "),e.value=r(o)}))})),t.addEventListener("blur",(e=>{const t=e.target;let o=t.value;o=o.replace(/[^а-яА-ЯёЁ0-9\s\-.,]+/g,""),o=r(o),t.value=o})),o.forEach((e=>{e.addEventListener("blur",(e=>{const t=e.target;let o=t.value;o=o.replace(/[^_@.!~*'A_Za-z\-\d]/g,""),o=r(o),o.includes("@")&&""!==o.trim()?t.value=o:(alert("Введите корректный адрес электронной почты"),t.value="")}))})),n.forEach((e=>{maskPhone(`#${e.id}`),e.addEventListener("blur",(e=>{const t=e.target;let o=t.value;o=o.replace(/^\+[^\d()\-]/g,""),o=r(o),o="+"+o,18===o.length?t.value=o:(alert("Введите корректный номер телефона длиной 11 символов"),t.value="")}))}))}(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),l=document.getElementById("total");t.addEventListener("change",(t=>{const a=t.target;(a.matches("select")||a.matches("input"))&&(()=>{let t=0,a=1,s=1;const i=o.options[o.selectedIndex].value,u=+n.value;if(c.value>1&&(a+=(c.value-1)/10),r.value&&r.value<5?s*=2:r.value&&r.value<10&&(s*=1.5),i&&u?t=Math.ceil(e*i*u*a*s):i||(t=0,n.value="",r.value="",c.value=""),t>=0){const e=function(e,t,o,n,r){let c=!1;c=o?setInterval((()=>{1*+e.textContent+n>=t?(e.textContent=t,clearInterval(c)):e.textContent=1*+e.textContent+n}),r):setInterval((()=>{1*+e.textContent-n<=t?(e.textContent=t,clearInterval(c)):e.textContent=1*+e.textContent-n}),r)};l.textContent>t?e(l,t,!1,50,1):e(l,t,!0,50,1)}})()}))})(100),(()=>{document.getElementById("form1"),document.getElementById("form2"),document.getElementById("form3");const e=document.querySelectorAll("form"),t=document.querySelector(".loader-container"),o=document.querySelector(".svg-loader-container"),n="animate",r=document.querySelector(".check-mark-loader"),c=document.querySelector(".error-alert"),l=document.querySelector(".error-alert-close");e.forEach((e=>{e.addEventListener("submit",(e=>{const s=e.target;e.preventDefault();const i=[...s.elements].filter((e=>"button"!==e.tagName.toLowerCase())),u=new FormData(s);let d={};u.forEach(((e,t)=>{d[t]=e})),""!==i[0].value&&""!==i[1].value&&""!==i[2].value?a(d).then((e=>{if(200!==e.status)throw new Error("status network not 200");i.forEach((e=>{e.value=""})),(e=>{t.style.display="none",o.style.display="block",r.classList.add(n),setTimeout((function(){r.classList.remove(n),o.style.display="none","form3"===e.id&&(document.querySelector(".popup").style.display="none")}),1700)})(s)})).catch((e=>{((e,o)=>{console.error(e),t.style.display="none",c.classList.add("error-alert-active"),l.addEventListener("click",(()=>{c.classList.remove("error-alert-active")})),"form3"===o.id&&(document.querySelector(".popup").style.display="none")})(e,s)})):(e.preventDefault(),alert("Введите корректные данные во все поля формы"))}))}));const a=e=>(t.style.display="block",fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))})()})();